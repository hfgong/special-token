\documentclass[tikz,border=10pt]{standalone}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,positioning,calc,patterns,shadows,arrows.meta}

\definecolor{bertblue}{RGB}{66,133,244}
\definecolor{gptgreen}{RGB}{52,168,83}
\definecolor{unkred}{RGB}{234,67,53}
\definecolor{subwordpurple}{RGB}{142,36,245}

\begin{document}
\begin{tikzpicture}[
    token/.style={rectangle, rounded corners=3pt, minimum width=1.2cm, minimum height=0.6cm, font=\footnotesize},
    unktoken/.style={token, fill=unkred!20, draw=unkred},
    goodtoken/.style={token, fill=bertblue!20, draw=bertblue},
    subword/.style={token, fill=subwordpurple!20, draw=subwordpurple},
    label/.style={font=\small},
    title/.style={font=\large\bfseries}
]

% Title removed - using figure caption instead

% Input text
\node[label, align=center] at (6, 8.2) {\textbf{Input Text:}\\``The antidisestablishmentarianism was extraordinary''};

% Method 1: Traditional Word-Level
\node[label, bertblue, align=left] at (1, 7.3) {\textbf{1. Traditional Word-Level}\\(vocab\_size = 5,000)};

\node[goodtoken] at (0.5, 6.5) {The};
\node[unktoken] at (2, 6.5) {[UNK]};
\node[goodtoken] at (3.5, 6.5) {was};
\node[unktoken] at (5, 6.5) {[UNK]};

\node[label, align=center] at (2.75, 5.9) {\textcolor{unkred}{50\% UNK rate}\\Information loss};

% Method 2: Character-Level
\node[label, gptgreen, align=left] at (8, 7.3) {\textbf{2. Character-Level}\\(no vocabulary limit)};

\node[goodtoken, scale=0.7] at (7, 6.7) {T};
\node[goodtoken, scale=0.7] at (7.4, 6.7) {h};
\node[goodtoken, scale=0.7] at (7.8, 6.7) {e};
\node[goodtoken, scale=0.7] at (8.2, 6.7) {\space};
\node[goodtoken, scale=0.7] at (8.6, 6.7) {a};
\node[goodtoken, scale=0.7] at (9, 6.7) {n};
\node[label] at (9.4, 6.7) {...};

\node[goodtoken, scale=0.7] at (7, 6.3) {w};
\node[goodtoken, scale=0.7] at (7.4, 6.3) {a};
\node[goodtoken, scale=0.7] at (7.8, 6.3) {s};
\node[goodtoken, scale=0.7] at (8.2, 6.3) {\space};
\node[goodtoken, scale=0.7] at (8.6, 6.3) {e};
\node[goodtoken, scale=0.7] at (9, 6.3) {x};
\node[label] at (9.4, 6.3) {...};

\node[label, align=center] at (8, 5.9) {\textcolor{gptgreen}{0\% UNK rate}\\Very long sequences};

% Method 3: Subword (BPE/WordPiece)
\node[label, subwordpurple, align=left] at (3, 5) {\textbf{3. Subword Tokenization}\\(WordPiece/BPE)};

% First word breakdown
\node[subword] at (0.8, 4.2) {The};
\node[subword] at (2.2, 4.2) {anti};
\node[subword] at (3.4, 4.2) {\#\#dis};
\node[subword] at (4.7, 4.2) {\#\#esta};
\node[subword] at (6.1, 4.2) {\#\#bli};

\node[subword] at (0.8, 3.8) {\#\#sh};
\node[subword] at (2.2, 3.8) {\#\#ment};
\node[subword] at (3.6, 3.8) {\#\#arian};
\node[subword] at (5.2, 3.8) {\#\#ism};

% Second word
\node[subword] at (7, 4.2) {was};
\node[subword] at (8.5, 4.2) {extra};
\node[subword] at (10, 4.2) {\#\#ordinary};

\node[label, align=center] at (5, 3.3) {\textcolor{subwordpurple}{0\% UNK rate}\\Balanced efficiency};

% Method 4: Hybrid Approach
\node[label, color=orange, align=left] at (9, 5) {\textbf{4. Hybrid Approach}\\(Subword + Character fallback)};

\node[subword] at (8, 4.2) {The};
\node[subword] at (9.2, 4.2) {rare\_word};
\node[goodtoken, scale=0.7] at (10.3, 4.2) {X};
\node[goodtoken, scale=0.7] at (10.6, 4.2) {Y};
\node[goodtoken, scale=0.7] at (10.9, 4.2) {Z};

\node[label, align=center] at (9.5, 3.8) {\textcolor{orange}{Adaptive handling}};

% Comparison metrics
\node[rectangle, draw=black, fill=gray!5, minimum width=12cm, minimum height=2.5cm] at (6, 2) {};
\node[label, font=\small\bfseries] at (6, 2.8) {Comparison Metrics};

% Table headers
\node[label, font=\footnotesize\bfseries] at (2, 2.5) {Method};
\node[label, font=\footnotesize\bfseries] at (4, 2.5) {UNK Rate};
\node[label, font=\footnotesize\bfseries] at (6, 2.5) {Seq Length};
\node[label, font=\footnotesize\bfseries] at (8, 2.5) {Efficiency};
\node[label, font=\footnotesize\bfseries] at (10, 2.5) {Coverage};

% Row 1: Traditional
\node[label, font=\footnotesize] at (2, 2.2) {Traditional};
\node[label, font=\footnotesize, unkred] at (4, 2.2) {High};
\node[label, font=\footnotesize, bertblue] at (6, 2.2) {Short};
\node[label, font=\footnotesize, gptgreen] at (8, 2.2) {Fast};
\node[label, font=\footnotesize, unkred] at (10, 2.2) {Poor};

% Row 2: Character
\node[label, font=\footnotesize] at (2, 1.9) {Character};
\node[label, font=\footnotesize, gptgreen] at (4, 1.9) {None};
\node[label, font=\footnotesize, unkred] at (6, 1.9) {Very Long};
\node[label, font=\footnotesize, unkred] at (8, 1.9) {Slow};
\node[label, font=\footnotesize, gptgreen] at (10, 1.9) {Perfect};

% Row 3: Subword
\node[label, font=\footnotesize] at (2, 1.6) {Subword};
\node[label, font=\footnotesize, gptgreen] at (4, 1.6) {Minimal};
\node[label, font=\footnotesize, gptgreen] at (6, 1.6) {Medium};
\node[label, font=\footnotesize, gptgreen] at (8, 1.6) {Good};
\node[label, font=\footnotesize, gptgreen] at (10, 1.6) {Excellent};

% Row 4: Hybrid
\node[label, font=\footnotesize] at (2, 1.3) {Hybrid};
\node[label, font=\footnotesize, gptgreen] at (4, 1.3) {None};
\node[label, font=\footnotesize, bertblue] at (6, 1.3) {Variable};
\node[label, font=\footnotesize, bertblue] at (8, 1.3) {Adaptive};
\node[label, font=\footnotesize, gptgreen] at (10, 1.3) {Perfect};

% Evolution arrow
\draw[->, very thick, black!60] (1, 0.8) -- (10, 0.8);
\node[label] at (5.5, 0.5) {Evolution toward better OOV handling};

% Key insights
\node[rectangle, draw=blue!50, fill=blue!5, minimum width=5cm, minimum height=1cm] at (3, 0) {};
\node[label, font=\small\bfseries, bertblue] at (3, 0.2) {Key Insight};
\node[label, font=\footnotesize, align=center] at (3, -0.1) {Subword tokenization\\balances all factors};

\node[rectangle, draw=purple!50, fill=purple!5, minimum width=5cm, minimum height=1cm] at (9, 0) {};
\node[label, font=\small\bfseries, subwordpurple] at (9, 0.2) {Modern Trend};
\node[label, font=\footnotesize, align=center] at (9, -0.1) {Hybrid approaches for\\ultimate flexibility};

\end{tikzpicture}
\end{document}